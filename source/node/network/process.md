# 节点加入/退出流程及权限控制

节点分两种类型：验证节点和同步节点，两种节点的加入和退出不同



#### 同步节点

直接配置好文件，就能直接连接节点



#### 验证节点

##### 新验证节点的加入

新验证节点加入，此节点未加入时为同步节点，需要通过选举合约把此节点选举为新的验证节点，并要求选举人为验证节点，非验证节点不能进行投票，选举新的验证节点步骤：

1. 某验证节点发起提案，提案内容为添加新的验证节点，此提案为一个系统合约交易，提案参数

   ```
   {
       "version": 1000,   #系统合约版本号
       "name": "p1",      #提案名称
       "candidate": "0x650c635e4f5cab8279340391e56ee5562f227ded",  #要选举的新验证节点
       "action": 0,       # 0 添加， 1 删除
       "limit": 1000      # 提案生命周期
   }
   ```

2. 验证节点对此提案进行投票，超过2/3投票即可成为新的验证节点，投票参数

   ```
   {
       "version": 1000,	#系统合约版本号
       "name": "p1"		#提案名称
   }
   ```

   

##### 验证节点的退出

验证节点退出也是通过选举投票方式把节点选出，步骤同选举新验证节点一样，先发起提案，然后投票，投出验证节点，步骤如下：

1. 发起投出验证节点的提案

   ```
   {
       "version": 1000,   #系统合约版本号
       "name": "p2",      #提案名称
       "candidate": "0x650c635e4f5cab8279340391e56ee5562f227ded",  #要投出的验证节点
       "action": 1,       # 0 添加， 1 删除
       "limit": 1000      # 提案生命周期
   }
   ```

   

2. 进行投票，超过2/3投票即可投出验证节点，投票参数

   ```
   {
       "version": 1000,	#系统合约版本号
       "name": "p2"		#提案名称
   }
   ```

   

#### 权限控制

只有验证节点才可以发起提案，并进行投票，非验证节点操作，交易不成功